<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Lab of Love | ç»™é˜¿ç šçš„ç¤¼ç‰©ç ”ç©¶æ‰€</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:ital,wght@0,400;1,700&family=Noto+Serif+SC:wght@300;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --accent: #D4AF37;
            --bg: #FDFBF8;
            --text: #4A4A4A;
        }
        body { 
            font-family: 'Noto Serif SC', serif; 
            background-color: var(--bg);
            color: var(--text);
            overflow-x: hidden;
        }
        .serif-italic { font-family: 'Bodoni Moda', serif; font-style: italic; }
        
        .fade-up { animation: fadeUp 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards; }
        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .rotate-in { animation: rotateIn 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }
        @keyframes rotateIn {
            from { opacity: 0; transform: rotate(-20deg) scale(0.8); }
            to { opacity: 1; transform: rotate(0deg) scale(1); }
        }

        .record-spin { animation: spin 4s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .option-card {
            transition: all 0.3s ease;
            border: 1px solid #EEE;
        }
        .option-card:hover {
            border-color: var(--accent);
            background-color: #FAF6F0;
            padding-left: 1.5rem;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--accent);
            transition: width 0.6s cubic-bezier(0.65, 0, 0.35, 1);
        }

        .gua-animation {
            animation: gua 0.5s ease-in-out infinite alternate;
        }
        @keyframes gua {
            from { transform: scale(1); }
            to { transform: scale(1.1); }
        }
        
        .custom-scroll::-webkit-scrollbar { width: 2px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: var(--accent); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const questions = [
            { type: "choice", category: "è§†è§‰å®¡ç¾", text: "é˜¿ç šæ›´å€¾å‘äºå“ªç§è‰²å½©åŸºè°ƒï¼Ÿ", options: [{label:"è«å…°è¿ªè‰²", v:"é«˜çº§æç®€", c:"A1"}, {label:"å¤å¤æš–è°ƒ", v:"æ¸©é¦¨", c:"A2"}, {label:"æ´»æ³¼é©¬å¡é¾™", v:"ç”œç¾", c:"A3"}] },
            { type: "choice", category: "å—…è§‰åå¥½", text: "å“ªç§æ°”æ¯æœ€èƒ½è®©ä½ æ„Ÿåˆ°â€œè¢«æ²»æ„ˆâ€ï¼Ÿ", options: [{label:"é›¨åè‰æœ¨", v:"æœ¨è´¨è°ƒ", c:"S1"}, {label:"è½¯ç³¯å¥¶é¦™", v:"çš‚æ„Ÿ", c:"S2"}, {label:"é…¸ç”œæŸ‘æ©˜", v:"æœé¦™", c:"S3"}] },
            { type: "choice", category: "æè´¨è§¦è§‰", text: "è´´èº«ç‰©ä»¶æ›´åå¥½å“ªç§è´¨æ„Ÿï¼Ÿ", options: [{label:"æ¸…å†·é‡‘å±", v:"å†·æ„Ÿ", c:"M1"}, {label:"æ¸©æ¶¦çç ", v:"æš–æ„Ÿ", c:"M2"}, {label:"æŸ”è½¯ä¸ç»’", v:"æ¸©æ„Ÿ", c:"M3"}] },
            { type: "choice", category: "ç›¸å¤„æ—¶åˆ»", text: "ç¬¨ç¬¨ç‹—å»–æƒ¹ä½ ç”Ÿæ°”æ—¶ï¼Œå“ªç§é“æ­‰æœ€æœ‰æ•ˆï¼Ÿ", options: [{label:"å“¼å”§è´´è´´", v:"æ’’å¨‡", c:"E1"}, {label:"ç¾é£ŸæŠ•å–‚", v:"åŠ¡å®", c:"E2"}, {label:"çœŸè¯šåçœ", v:"æ€åº¦", c:"E3"}] },
            { type: "choice", category: "ç”Ÿæ´»å½¢æ€", text: "ç†æƒ³çš„åˆåçŠ¶æ€æ˜¯ï¼Ÿ", options: [{label:"çªåœ¨æ²™å‘çœ‹ç”µå½±", v:"é™æ€", c:"L1"}, {label:"å»è¡—è§’æ¢åº—æ‹ç…§", v:"åŠ¨æ€", c:"L2"}, {label:"åœ¨é˜³å…‰ä¸‹ç¡åˆè§‰", v:"æ²»æ„ˆ", c:"L3"}] },
            
            // ç¬¬5é¢˜åçš„ç‰¹æ®Šæ—‹è½¬é¡µé¢
            { type: "special_rotate", category: "ç”œèœœç¬é—´", text: "æ•æ‰åˆ°ä¸€åªæ­£åœ¨æ—‹è½¬è¿›åœºçš„é˜¿ç šï¼" },
            
            { type: "choice", category: "é¥°å“é£æ ¼", text: "æ›´å–œæ¬¢å“ªç§è®¾è®¡æ„Ÿçš„é¥°å“ï¼Ÿ", options: [{label:"æç®€çº¿æ¡", v:"ç°ä»£", c:"D1"}, {label:"ç¹å¤å·´æ´›å…‹", v:"åä¸½", c:"D2"}, {label:"æ‰‹å·¥æ„Ÿå°ä¼—", v:"æ–‡è‰º", c:"D3"}] },
            { type: "choice", category: "æ™ºå•†äº’åŠ¨", text: "ä½ è§‰å¾—ç¬¨ç¬¨ç‹—é˜¿å»–å’ŒèŠ±æé¼ è°æ›´èªæ˜ï¼Ÿ", options: [{label:"èŠ±æé¼ ï¼ˆæ— æƒ…ï¼‰", v:"æ‰å¿ƒ", c:"E4"}, {label:"ç¬¨ç¬¨ç‹—ï¼ˆå‹‰å¼ºï¼‰", v:"é¼“åŠ±", c:"E5"}, {label:"é‡‘ä¸ç†Šæœ€èªæ˜ï¼", v:"åœ°ä½", c:"E6"}] },
            { type: "choice", category: "å­£èŠ‚åå¥½", text: "å“ªä¸ªå­£èŠ‚ä¼šè®©ä½ æ›´æœ‰ç‰©æ¬²ï¼Ÿ", options: [{label:"æ¸©æš–æ…µæ‡’çš„å†¬", v:"åšé‡", c:"W1"}, {label:"ä¸‡ç‰©å¤è‹çš„æ˜¥", v:"è½»ç›ˆ", c:"W2"}, {label:"çƒ­çƒˆå–§åš£çš„å¤", v:"è‰²å½©", c:"W3"}] },
            { type: "choice", category: "æƒ…æ„Ÿä»·å€¼", text: "ä½ å¦‚ä½•çœ‹å¾…â€œæƒ…ä¾£æ¬¾â€ï¼Ÿ", options: [{label:"å¿…é¡»è¦æœ‰ï¼Œå®˜å®£å¿…å¤‡", v:"è®¤åŒ", c:"V1"}, {label:"ä½è°ƒå†…æ•›ï¼Œç»†èŠ‚å‘¼åº”", v:"å«è“„", c:"V2"}, {label:"éšç¼˜ï¼Œå¥½çœ‹å°±è¡Œ", v:"éšæ€§", c:"V3"}] },
            { type: "choice", category: "å‘³è§‰åœ°å›¾", text: "æ­¤æ—¶æ­¤åˆ»æœ€æƒ³åƒçš„ä¸€å£æ˜¯ï¼Ÿ", options: [{label:"èŠå£«å°±æ˜¯åŠ›é‡", v:"æµ“éƒ", c:"F1"}, {label:"æ¸…çˆ½æ°´æœæ", v:"è§£è…»", c:"F2"}, {label:"ç«è¾£çº¢æ²¹ç«é”…", v:"åˆºæ¿€", c:"F3"}] },
            
            { type: "special_dog", category: "å¯çˆ±å†²å‡»", text: "ç¬¨ç¬¨ç‹—å»–å‘ä½ å‘æ¥äº†å–èŒå…‰æ³¢ï¼" },

            { type: "choice", category: "å®ç”¨ä¸»ä¹‰", text: "æ”¶åˆ°ç¤¼ç‰©ï¼Œä½ ç¬¬ä¸€ååº”æ˜¯çœ‹ï¼Ÿ", options: [{label:"åŒ…è£…çš„ç²¾è‡´ç¨‹åº¦", v:"é¢œå€¼", c:"U1"}, {label:"æ—¥å¸¸æ˜¯å¦èƒ½ç”¨åˆ°", v:"åŠŸèƒ½", c:"U2"}, {label:"æ˜¯å¦æ˜¯å¿ƒå¿ƒå¿µå¿µå¾ˆä¹…çš„", v:"åœ†æ¢¦", c:"U3"}] },
            { type: "choice", category: "ç¯å¢ƒæ°›å›´", text: "æœ€å–œæ¬¢çš„çº¦ä¼šç¯å¢ƒæ˜¯ï¼Ÿ", options: [{label:"æœ‰æ ¼è°ƒçš„è¥¿é¤å…", v:"æ­£å¼", c:"C1"}, {label:"å……æ»¡ç”Ÿæ´»æ°”çš„å¤œå¸‚", v:"æ¥åœ°æ°”", c:"C2"}, {label:"ç©ºæ— ä¸€äººçš„ç¾æœ¯é¦†", v:"å®‰é™", c:"C3"}] },
            { type: "choice", category: "ç¡çœ ä¹ æƒ¯", text: "ç¡è§‰æ—¶æ›´ä¾èµ–ï¼Ÿ", options: [{label:"è½¯ç»µç»µçš„å¤§æ•å¤´", v:"æ”¯æ’‘", c:"H1"}, {label:"æ²‰ç”¸ç”¸çš„åšè¢«å­", v:"å®‰å…¨æ„Ÿ", c:"H2"}, {label:"æŠ±ç€ç¬¨ç¬¨ç‹—ï¼ˆæˆ–è€…ç©å¶ï¼‰", v:"æƒ…æ„Ÿ", c:"H3"}] },
            { type: "choice", category: "è‰²å½©åå¥½", text: "å¦‚æœç»™å¿ƒæƒ…æ¶‚é¢œè‰²ï¼Œä»Šå¤©æ˜¯ï¼Ÿ", options: [{label:"æ¸©æŸ”çš„é¹…é»„", v:"æ„‰æ‚¦", c:"K1"}, {label:"é™è°§çš„æ¹–è“", v:"å¹³å’Œ", c:"K2"}, {label:"çƒ­æƒ…çš„æ©˜çº¢", v:"æœŸå¾…", c:"K3"}] },
            { type: "choice", category: "ä»ªå¼æ„Ÿ", text: "ä½ è§‰å¾—æœ€æœ‰ä»ªå¼æ„Ÿçš„å°äº‹æ˜¯ï¼Ÿ", options: [{label:"å‡ºé—¨å‰çš„é¦™æ°´å–·é›¾", v:"æ°”å‘³", c:"Y1"}, {label:"ç¡å‰çš„ä¸€æ¯çƒ­ç‰›å¥¶", v:"è§¦è§‰", c:"Y2"}, {label:"äº’é“æ™šå®‰çš„äº²äº²", v:"æƒ…æ„Ÿ", c:"Y3"}] },
            
            // é’è›™è°ƒæ•´åˆ°é è¿‘ç»“å°¾ï¼ŒåŒ¹é… BGM é«˜æ½®
            { type: "special_frog", category: "æ°”æ°›é¡¶ç‚¹", text: "è­¦å‘Šï¼ä¸€åªè¹¦è¿ªé’è›™æ­£åœ¨è¯•å›¾å é¢†é—®å·ï¼" },
            
            { type: "choice", category: "é¦–é¥°éƒ¨ä½", text: "å¦‚æœä½ åªèƒ½æˆ´ä¸€ä»¶é¥°å“ï¼Œä¼šé€‰ï¼Ÿ", options: [{label:"ç‚¹äº®é¢éƒ¨çš„è€³é¥°", v:"è€³éƒ¨", c:"P1"}, {label:"ä¿®é¥°çº¿æ¡çš„é¡¹é“¾", v:"é¢ˆéƒ¨", c:"P2"}, {label:"ä¸¾æ‰‹æŠ•è¶³é—´çš„æˆ’æŒ‡", v:"æ‰‹éƒ¨", c:"P3"}] },
            { type: "choice", category: "ç¤¼ç‰©é›·åŒº", text: "ç»å¯¹ä¸å¸Œæœ›çœ‹åˆ°çš„åŒ…è£…æ–¹å¼ï¼Ÿ", options: [{label:"äº”å½©æ–‘æ–“çš„å‘å…‰ç¤¼ç›’", v:"é¿é›·1", c:"T1"}, {label:"å¡æ»¡æ‹‰è²è‰çš„å·¨å¤§ç›’å­", v:"é¿é›·2", c:"T2"}, {label:"é€æ˜ç®€é™‹çš„å¡‘æ–™è¢‹", v:"é¿é›·3", c:"T3"}] },
            { type: "choice", category: "æœªæ¥æœŸå¾…", text: "ä¸‹ä¸ªå‡æœŸæœ€æƒ³å»ï¼Ÿ", options: [{label:"çœ‹æµ·å¹é£", v:"æµªæ¼«", c:"Z1"}, {label:"æ·±å±±å¸æ°§", v:"é¿ä¸–", c:"Z2"}, {label:"åŸå¸‚æ¼«æ¸¸", v:"ç¹å", c:"Z3"}] },
            { type: "choice", category: "æœ€ç»ˆå‘Šç™½", text: "æœ€åä¸€ä¸ªé—®é¢˜ï¼šç¬¨ç¬¨ç‹—é˜¿å»–çˆ±ä½ å—ï¼Ÿ", options: [{label:"è¶…çˆ±ï¼å…¨ä¸–ç•Œæœ€çˆ±ï¼", v:"æ»¡åˆ†", c:"LOVE1"}, {label:"æ•¢ä¸çˆ±ï¼Ÿé‡‘ä¸ç†Šè­¦å‘Š", v:"å¨æ…‘", c:"LOVE2"}] }
        ];

        function App() {
            const [step, setStep] = useState('welcome');
            const [currentIdx, setCurrentIdx] = useState(0);
            const [answers, setAnswers] = useState([]);
            const [isPlaying, setIsPlaying] = useState(false);
            const audioRef = useRef(null);

            const handleStart = () => {
                setStep('quiz');
                if (audioRef.current) {
                    audioRef.current.play().then(() => setIsPlaying(true)).catch(e => {});
                }
            };

            const nextStep = (ans) => {
                if (ans) setAnswers([...answers, ans]);
                if (currentIdx < questions.length - 1) {
                    setCurrentIdx(currentIdx + 1);
                } else {
                    setStep('result');
                }
            };

            return (
                <div className="max-w-screen-md mx-auto min-h-screen flex flex-col px-8 py-12 relative bg-[#FDFBF8]">
                    <audio ref={audioRef} src="bgm.mp3" loop />
                    
                    {step === 'welcome' && (
                        <div className="flex-1 flex flex-col justify-center items-center text-center fade-up">
                            <span className="serif-italic text-accent tracking-[0.3em] text-[10px] mb-6 uppercase">Private Laboratory v3.0</span>
                            <h1 className="text-4xl font-bold mb-8 leading-tight tracking-tight text-[#333]">é˜¿ç šä¸“å±<br/>ç¤¼ç‰©å¿ƒæ„ç ”ç©¶æ‰€</h1>
                            <div className="w-12 h-[1px] bg-accent mb-8"></div>
                            <p className="text-gray-400 leading-relaxed max-w-[280px] mb-12 text-xs font-light">
                                â€œğŸ˜¼ç‚¹å‡»å¼€å§‹ä½ å°†ä¼šæµªè´¹äººç”Ÿä¸­çš„äº”åˆ†é’Ÿï¼â€
                            </p>
                            <button onClick={handleStart} className="px-16 py-5 border border-accent text-accent hover:bg-accent hover:text-white transition-all duration-500 text-[10px] font-bold tracking-[0.2em]">
                                ENTER THE LAB
                            </button>
                        </div>
                    )}

                    {step === 'quiz' && (
                        <div className="flex-1 flex flex-col fade-up" key={currentIdx}>
                            <div className="mb-12">
                                <div className="flex justify-between items-end mb-4">
                                    <span className="serif-italic text-2xl text-accent opacity-50">{currentIdx + 1} / {questions.length}</span>
                                    <div className={`w-6 h-6 border border-accent/20 rounded-full flex items-center justify-center ${isPlaying ? 'record-spin' : ''}`}>
                                        <div className="w-1 h-1 bg-accent rounded-full"></div>
                                    </div>
                                </div>
                                <div className="h-[1px] bg-gray-100 w-full relative">
                                    <div className="progress-fill absolute top-0 left-0" style={{ width: `${((currentIdx + 1) / questions.length) * 100}%` }}></div>
                                </div>
                            </div>

                            <div className="flex-1">
                                <span className="text-accent text-[10px] font-bold tracking-[0.2em] uppercase mb-4 block">
                                    {questions[currentIdx].category}
                                </span>

                                {questions[currentIdx].type === "choice" && (
                                    <>
                                        <h2 className="text-2xl font-bold mb-10 text-[#333] leading-snug">{questions[currentIdx].text}</h2>
                                        <div className="space-y-4">
                                            {questions[currentIdx].options.map((opt, i) => (
                                                <button key={i} onClick={() => nextStep({q:questions[currentIdx].text, a:opt.label, code:opt.c})} className="option-card w-full text-left p-6 bg-white flex items-center justify-between group">
                                                    <span className="text-xs text-gray-500 group-hover:text-accent transition-colors">{opt.label}</span>
                                                    <span className="text-[10px] text-accent opacity-0 group-hover:opacity-100 transition-all">PICKED</span>
                                                </button>
                                            ))}
                                        </div>
                                    </>
                                )}

                                {questions[currentIdx].type === "special_rotate" && (
                                    <div className="text-center py-10 flex flex-col items-center rotate-in">
                                        <h2 className="text-xl font-bold mb-8 text-[#333]">{questions[currentIdx].text}</h2>
                                        <div className="w-64 h-80 bg-white p-3 shadow-2xl border-4 border-white transform -rotate-3 mb-10 overflow-hidden">
                                            <img src="surprise.png" alt="æ—‹è½¬è¿›åœºå›¾" className="w-full h-full object-cover" onError={(e) => {e.target.src='https://via.placeholder.com/200x300?text=Wait+for+surprise.png'}} />
                                        </div>
                                        <button onClick={() => nextStep()} className="px-10 py-3 bg-accent text-white text-[10px] font-bold tracking-widest hover:shadow-lg transition-shadow">
                                            ç»§ç»­æ¢ç´¢ â†’
                                        </button>
                                    </div>
                                )}

                                {questions[currentIdx].type === "special_frog" && (
                                    <div className="text-center py-10 flex flex-col items-center">
                                        <h2 className="text-xl font-bold mb-6 text-[#333]">{questions[currentIdx].text}</h2>
                                        <div className="relative mb-8">
                                            <img src="frog.png" alt="é’è›™" className="w-40 h-40 gua-animation opacity-90" onError={(e) => e.target.style.display='none'} />
                                            <div className="absolute -top-4 -right-4 bg-white px-3 py-1 text-[10px] border border-accent text-accent font-bold rotate-12">GUAAA!</div>
                                        </div>
                                        <div className="text-accent font-black text-3xl mb-12 tracking-[0.5em] gua-animation uppercase"> </div>
                                        <button onClick={() => nextStep()} className="text-[10px] border-b border-accent pb-1 text-accent tracking-widest font-bold">æ¬£èµå®Œæ¯•ï¼Œè¿›å…¥ç»ˆç‚¹</button>
                                    </div>
                                )}

                                {questions[currentIdx].type === "special_dog" && (
                                    <div className="text-center py-10 flex flex-col items-center">
                                        <h2 className="text-xl font-bold mb-6 text-[#333]">{questions[currentIdx].text}</h2>
                                        <div className="w-56 h-56 bg-white p-2 border border-accent/10 shadow-sm mb-10 rounded-full overflow-hidden">
                                            <img src="dog.png" alt="ç‹—å–èŒ" className="w-full h-full object-cover" />
                                        </div>
                                        <button onClick={() => nextStep()} className="text-[10px] border-b border-accent pb-1 text-accent tracking-widest">è¢«èŒåäº†ï¼Œç»§ç»­</button>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {step === 'result' && (
                        <div className="flex-1 flex flex-col justify-center items-center text-center fade-up pt-10">
                            <div className="w-16 h-16 bg-accent rounded-full mb-8 flex items-center justify-center text-white text-2xl shadow-xl">â¤</div>
                            <h2 className="text-2xl font-bold mb-4 tracking-tight">é˜¿ç šçš„ç¤¼ç‰©è“å›¾å·²ç”Ÿæˆ</h2>
                            <p className="text-gray-400 text-[10px] mb-10 leading-loose">
                                æ‰€æœ‰çš„åå¥½ã€å½©è›‹å’Œâ€œå‘±å‘±å‘±â€éƒ½å·²å½’æ¡£å®Œæ¯•ã€‚<br/>
                                ç¬¨ç¬¨ç‹—å»–å·²ç»é”å®šäº†ä½ çš„å¿ƒåŠ¨ä¿¡å·ã€‚
                            </p>
                            
                            <div className="w-full bg-white border border-gray-100 p-6 mb-8 text-left h-72 overflow-y-auto custom-scroll shadow-inner">
                                <div className="text-[10px] font-bold text-accent mb-4 tracking-widest uppercase border-b pb-2 flex justify-between">
                                    <span>Archive Logs</span>
                                    <span>Total: 20 Items</span>
                                </div>
                                {answers.map((ans, i) => (
                                    <div key={i} className="text-[9px] mb-3 flex justify-between border-b border-gray-50 pb-2 hover:bg-gray-50 transition-colors">
                                        <span className="text-gray-300 w-8">#{i+1}</span>
                                        <span className="text-gray-500 flex-1 px-4">{ans.q}</span>
                                        <span className="text-accent font-bold uppercase">{ans.code}</span>
                                    </div>
                                ))}
                            </div>

                            <button onClick={() => {
                                const text = answers.map((a,i)=>`${i+1}.[${a.code}]${a.a}`).join('\n');
                                navigator.clipboard.writeText(`é˜¿ç šçš„22é¡¹å®éªŒæŠ¥å‘Šï¼ˆå«å½©è›‹ï¼‰ï¼š\n${text}\n--ç¬¨ç¬¨ç‹—é˜¿å»–æ”¶--`).then(()=>alert("å¿ƒæ„¿æŠ¥å‘Šå·²å¤åˆ¶ï¼Œå¿«å‘ç»™é˜¿å»–å§ï¼"));
                            }} className="w-full bg-[#333] text-white py-5 font-bold text-[10px] tracking-[0.2em] hover:bg-accent transition-all shadow-lg active:scale-95">
                                ç‚¹å‡»å¤åˆ¶ å®Œæ•´å®éªŒæŠ¥å‘Š
                            </button>
                            <p className="mt-4 text-[9px] text-gray-300">å¤åˆ¶åç²˜è´´ç»™å¾®ä¿¡é‡Œçš„ç¬¨ç¬¨ç‹—</p>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

