<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Lab of Love | ç»™é˜¿ç šçš„ç¤¼ç‰©ç ”ç©¶æ‰€</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:ital,wght@0,400;1,700&family=Noto+Serif+SC:wght@300;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --accent: #D4AF37; /* é«˜çº§é‡‘ */
            --bg: #FDFBF8;    /* å¥¶èŒ¶ç±³ */
            --text: #4A4A4A;
        }
        body { 
            font-family: 'Noto Serif SC', serif; 
            background-color: var(--bg);
            color: var(--text);
            overflow-x: hidden;
        }
        .serif-italic { font-family: 'Bodoni Moda', serif; font-style: italic; }
        
        .line-deco {
            height: 1px;
            background: linear-gradient(to right, transparent, var(--accent), transparent);
            width: 100%;
            margin: 2rem 0;
        }

        .fade-up { animation: fadeUp 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards; }
        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .record-spin { animation: spin 4s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .option-card {
            transition: all 0.3s ease;
            border: 1px solid #EEE;
        }
        .option-card:hover {
            border-color: var(--accent);
            background-color: #FAF6F0;
            padding-left: 2rem;
        }
        
        .progress-bar {
            height: 2px;
            background: #E5E5E5;
            position: relative;
        }
        .progress-fill {
            height: 100%;
            background: var(--accent);
            transition: width 0.6s cubic-bezier(0.65, 0, 0.35, 1);
        }

        /* ä¸“é—¨ä¸ºé˜¿ç šè®¾è®¡çš„å¯çˆ±å¾®äº¤äº’ */
        .dog-ear { transition: transform 0.3s; }
        .group:hover .dog-ear { transform: rotate(15deg); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const MusicIcon = ({ isPlaying }) => (
            <div className={`relative ${isPlaying ? 'record-spin' : ''}`}>
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5">
                    <circle cx="12" cy="12" r="10" />
                    <circle cx="12" cy="12" r="3" />
                </svg>
            </div>
        );

        const questions = [
            {
                category: "å®¡ç¾åŸºè°ƒ | Aesthetic",
                text: "å¦‚æœç”Ÿæ´»æ˜¯ä¸€åœºç”µå½±ï¼Œé˜¿ç šæ›´å€¾å‘äºå“ªç§è‰²å½©åŸºè°ƒï¼Ÿ",
                options: [
                    { label: "è«å…°è¿ªè‰²ç³»ï¼šä½é¥±å’Œåº¦çš„æ¸©æŸ”ä¸ç–ç¦»", value: "é«˜çº§æç®€", code: "A1" },
                    { label: "å¤å¤æš–è°ƒï¼šåƒç§‹å¤©è½å¶å’Œåˆåçº¢èŒ¶", value: "å¤å¤æ¸©é¦¨", code: "A2" },
                    { label: "é©¬å¡é¾™è‰²å½©ï¼šè·³è·ƒçš„ã€å¯çˆ±çš„ã€å……æ»¡ç”Ÿæœºçš„", value: "ç”œç¾æ´»åŠ›", code: "A3" }
                ]
            },
            {
                category: "æ„Ÿå®˜åå¥½ | Senses",
                text: "å½“ä½ é—­ä¸Šçœ¼ï¼Œå“ªç§æ°”æ¯æœ€èƒ½è®©ä½ æ„Ÿåˆ°â€œè¢«æ²»æ„ˆâ€ï¼Ÿ",
                options: [
                    { label: "æ¸…å†·è‰æœ¨ï¼šé›¨åçš„æ£®æ—ä¸æ³¥åœŸæ°”æ¯", value: "æœ¨è´¨è°ƒ", code: "S1" },
                    { label: "è½¯ç³¯å¥¶é¦™ï¼šåƒåˆšæ´—è¿‡çš„è¢«å•å’Œçˆ½èº«ç²‰", value: "çš‚æ„Ÿå¥¶é¦™", code: "S2" },
                    { label: "æ¸…ç”œæœé¦™ï¼šç†Ÿé€çš„æ¡ƒå­æˆ–é…¸æ¶©çš„æŸ‘æ©˜", value: "æœé¦™è°ƒ", code: "S3" }
                ]
            },
            {
                category: "æ™ºå•†åšå¼ˆ | Egg (å–èŒ)",
                text: "ï¼ˆå½©è›‹ï¼‰å…³äºæ™ºå•†ï¼Œé˜¿ç šé‡‘ä¸ç†Šå¯¹ç¬¨ç¬¨ç‹—å»–çš„è¯„ä»·æ˜¯ï¼Ÿ",
                options: [
                    { label: "â€œå®å®ç‹—æ™ºå•†ä½æ²¡å…³ç³»ï¼Œæˆ‘æœ‰è„‘å­å°±è¡Œâ€", value: "å® æººå‹", code: "E1" },
                    { label: "â€œå“ï¼Œè¿™åªç‹—æ²¡æ•‘äº†ï¼Œåªèƒ½äº²äº²ç»­å‘½äº†â€", value: "æ— å¥ˆå‹", code: "E2" },
                    { label: "â€œå…¶å®ä»–æ˜¯åœ¨æ‰®çŒªåƒè€è™ï¼Œåå¾—å¾ˆï¼â€", value: "è­¦æƒ•å‹", code: "E3" }
                ]
            },
            {
                category: "é¥°å“ç»†èŠ‚ | Material",
                text: "å¦‚æœæ˜¯ä¸€ä»¶è´´èº«çš„å°ç‰©ä»¶ï¼Œé˜¿ç šæ›´åå¥½å“ªç§è´¨æ„Ÿï¼Ÿ",
                options: [
                    { label: "å†·æ„Ÿçš„é“¶/ç™½é‡‘ï¼šæ¸…å†·ä¸”æœ‰åŠ›é‡", value: "å†·è‰²é‡‘å±", code: "M1" },
                    { label: "æ¸©æ¶¦çš„çç /ç«ç‘°é‡‘ï¼šæŸ”å’Œä¸”é«˜çº§", value: "æš–è‰²è´¨æ„Ÿ", code: "M2" },
                    { label: "å¤©ç„¶çš„çš®é©/ä¸ç»’ï¼šæŸ”è½¯æœ‰æ¸©åº¦", value: "è½¯è´¨ææ–™", code: "M3" }
                ]
            },
            {
                category: "ç¤¼ç‰©å½¢æ€ | Form",
                text: "ä½ ç†æƒ³ä¸­çš„â€œæƒŠå–œåŒ…è£¹â€æ‹†å¼€ååº”è¯¥æ˜¯ï¼Ÿ",
                options: [
                    { label: "å¾ˆæœ‰åˆ†é‡çš„â€œå¤§å®¶ä¼™â€ï¼Œéå¸¸æœ‰å­˜åœ¨æ„Ÿ", value: "åšé‡æ„Ÿ", code: "F1" },
                    { label: "ç²¾è‡´ç²ç‘çš„â€œå°å¯çˆ±â€ï¼Œå¯ä»¥éšèº«æºå¸¦", value: "ä¾¿æºæ„Ÿ", code: "F2" },
                    { label: "ä¸€æ•´ç›’æ•£è½çš„â€œå°ç¡®å¹¸â€ï¼Œæ¯æ ·éƒ½å¾ˆæœ‰è¶£", value: "ä¸°å¯Œæ„Ÿ", code: "F3" }
                ]
            },
            {
                category: "ç›¸å¤„æ¨¡å¼ | Egg (å–èŒ)",
                text: "ï¼ˆå½©è›‹ï¼‰ç¬¨ç¬¨ç‹—åšé”™äº‹åï¼Œå“ªç§é“æ­‰å§¿åŠ¿æœ€å®¹æ˜“å¾—åˆ°é˜¿ç šçš„åŸè°…ï¼Ÿ",
                options: [
                    { label: "åƒä¿®å‹¾ä¸€æ ·å“¼å“¼å”§å”§åœ°è¹­è¹­è´´è´´", value: "è‚¢ä½“æ’’å¨‡", code: "E4" },
                    { label: "ç«‹åˆ»å¥‰ä¸Šç²¾ç¾çš„å°é›¶é£Ÿï¼ˆæŠ•å–‚å¤§æ³•ï¼‰", value: "é£Ÿç‰©è¯±æƒ‘", code: "E5" },
                    { label: "ä¸€è„¸æ— è¾œåœ°çœ‹ç€ä½ ï¼Œç›´åˆ°ä½ å¿ä¸ä½ç¬‘åœº", value: "é¢œå€¼æ”»åŠ¿", code: "E6" }
                ]
            },
            {
                category: "ç”Ÿæ´»å“²å­¦ | Utility",
                text: "å…³äºâ€œç¤¼ç‰©â€çš„å®šä¹‰ï¼Œä½ æ›´çœ‹é‡å“ªä¸€ä¸ªå±‚é¢ï¼Ÿ",
                options: [
                    { label: "ç²¾è‡´çš„ä»ªå¼æ„Ÿï¼šå“ªæ€•ä¸å¸¸ç”¨ï¼Œä½†çœ‹ä¸€çœ¼å°±å¾ˆå¹¸ç¦", value: "æƒ…æ„Ÿä»·å€¼", code: "U1" },
                    { label: "é•¿ä¹…çš„é™ªä¼´æ„Ÿï¼šæ¯å¤©éƒ½èƒ½ç”¨åˆ°ï¼Œåƒé˜¿å»–åœ¨èº«è¾¹", value: "å®ç”¨ä¸»ä¹‰", code: "U2" },
                    { label: "æ‹†ç›²ç›’çš„æƒŠå–œï¼šå“ªæ€•ä¸‘èŒå¥‡æ€ªï¼Œä¹Ÿè¦ç‹¬ä¸€æ— äºŒ", value: "ç‹¬ç‰¹æ€§", code: "U3" }
                ]
            },
            {
                category: "é›·åŒºè­¦å‘Š | Taboo",
                text: "æœ€åï¼Œç»å¯¹ä¸èƒ½è§¦ç¢°çš„â€œç›´ç”·å®¡ç¾â€åº•çº¿æ˜¯ï¼Ÿ",
                options: [
                    { label: "æ²¡æœ‰ä»»ä½•å®ç”¨ä»·å€¼çš„â€œå‡èŠ±/åœŸå‘³ç¤¼ç›’â€", value: "é¿å¼€åœŸå‘³", code: "T1" },
                    { label: "è‡ªä»¥ä¸ºå¹½é»˜ä½†å…¶å®å¾ˆå°´å°¬çš„å¥‡æ€ªæŒ‚ä»¶", value: "é¿å¼€å°¬å¹½é»˜", code: "T2" },
                    { label: "è™½ç„¶æ˜¯å¤§ç‰Œä½†ä¸‘åˆ°éš¾ä»¥å¿å—çš„å•å“", value: "é¿å¼€ç›²ç›®å¤§ç‰Œ", code: "T3" }
                ]
            }
        ];

        function App() {
            const [step, setStep] = useState('welcome');
            const [currentIdx, setCurrentIdx] = useState(0);
            const [answers, setAnswers] = useState([]);
            const [isPlaying, setIsPlaying] = useState(false);
            const audioRef = useRef(null);

            const handleStart = () => {
                setStep('quiz');
                if (audioRef.current) {
                    audioRef.current.play().then(() => {
                        setIsPlaying(true);
                    }).catch(e => console.log("Music play blocked", e));
                }
            };

            const toggleMusic = () => {
                if (isPlaying) {
                    audioRef.current.pause();
                    setIsPlaying(false);
                } else {
                    audioRef.current.play();
                    setIsPlaying(true);
                }
            };

            const handleAnswer = (option) => {
                const newAnswers = [...answers, { q: questions[currentIdx].text, a: option.label, value: option.value, code: option.code }];
                setAnswers(newAnswers);
                
                if (currentIdx < questions.length - 1) {
                    setCurrentIdx(currentIdx + 1);
                } else {
                    setStep('result');
                }
            };

            const copyResults = () => {
                const summary = answers.map((ans, i) => `${i+1}. [${ans.code}] ${ans.a}`).join('\n');
                const text = `é˜¿ç šçš„ç¤¼ç‰©è°ƒæŸ¥æŠ¥å‘Šï¼š\n------------------\n${summary}\n------------------\nç¬¨ç¬¨ç‹—é˜¿å»–ï¼Œè¯·æŒ‰æ­¤æŒ‡å¼•å‡†å¤‡æƒŠå–œå§ï¼ğŸ¾`;
                
                const textArea = document.createElement("textarea");
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    alert("æŠ¥å‘Šå·²å¤åˆ¶ï¼å¿«å»å‘ç»™ç¬¨ç¬¨ç‹—å§~");
                } catch (err) {
                    alert("å¤åˆ¶å¤±è´¥ï¼Œè¯·æˆªå›¾ã€‚");
                }
                document.body.removeChild(textArea);
            };

            return (
                <div className="max-w-screen-md mx-auto min-h-screen flex flex-col px-8 py-12 relative bg-[#FDFBF8]">
                    {/* éšè—çš„éŸ³é¢‘å…ƒç´  */}
                    <audio ref={audioRef} src="bgm.mp3" loop preload="auto" />
                    
                    {/* éŸ³ä¹æ‚¬æµ®æŒ‰é’® */}
                    {step !== 'welcome' && (
                        <button 
                            onClick={toggleMusic}
                            className={`fixed top-8 right-8 z-50 p-3 rounded-full border border-accent/20 bg-white/50 backdrop-blur-sm transition-all ${isPlaying ? 'text-accent' : 'text-gray-300'}`}
                        >
                            <MusicIcon isPlaying={isPlaying} />
                        </button>
                    )}

                    {step === 'welcome' && (
                        <div className="flex-1 flex flex-col justify-center items-center text-center fade-up">
                            <span className="serif-italic text-accent tracking-[0.3em] text-[10px] mb-6 uppercase">Private Laboratory</span>
                            <h1 className="text-4xl md:text-5xl font-bold mb-8 leading-tight tracking-tight">é˜¿ç šä¸“å±<br/>ç¤¼ç‰©å¿ƒæ„ç ”ç©¶æ‰€</h1>
                            <div className="line-deco"></div>
                            <p className="text-gray-400 leading-relaxed max-w-[280px] mb-12 text-xs font-light">
                                â€œé€šè¿‡8ä¸ªç»´åº¦çš„æ„Ÿå®˜æµ‹è¯•ï¼Œä¸ºç¬¨ç¬¨ç‹—é˜¿å»–æä¾›ä¸€ä»½ç²¾å‡†çš„æµªæ¼«é¿é›·æŒ‡å—ã€‚â€
                            </p>
                            <button 
                                onClick={handleStart}
                                className="group relative overflow-hidden border border-accent text-accent px-16 py-5 transition-all duration-500 hover:text-white"
                            >
                                <span className="relative z-10 tracking-[0.2em] text-[10px] uppercase font-bold">å¼€å¯ç ”ç©¶æ‰€ (BGM ON)</span>
                                <div className="absolute top-0 left-0 w-0 h-full bg-accent transition-all duration-500 group-hover:w-full"></div>
                            </button>
                        </div>
                    )}

                    {step === 'quiz' && (
                        <div className="flex-1 flex flex-col fade-up">
                            <div className="mb-16">
                                <div className="flex justify-between items-end mb-4">
                                    <span className="serif-italic text-3xl text-accent opacity-50">0{currentIdx + 1}</span>
                                    <span className="text-[10px] tracking-widest uppercase text-gray-300">Questionnaire In Progress</span>
                                </div>
                                <div className="progress-bar">
                                    <div className="progress-fill" style={{ width: `${((currentIdx + 1) / questions.length) * 100}%` }}></div>
                                </div>
                            </div>

                            <div className="mb-12">
                                <span className="text-accent text-[10px] font-bold tracking-[0.2em] uppercase mb-4 block opacity-80">
                                    {questions[currentIdx].category}
                                </span>
                                <h2 className="text-2xl font-bold leading-snug text-[#333]">
                                    {questions[currentIdx].text}
                                </h2>
                            </div>

                            <div className="space-y-4">
                                {questions[currentIdx].options.map((opt, i) => (
                                    <button 
                                        key={i} 
                                        onClick={() => handleAnswer(opt)}
                                        className="option-card w-full text-left p-6 bg-white flex items-center justify-between group rounded-sm"
                                    >
                                        <span className="text-xs text-gray-600 group-hover:text-accent transition-colors">{opt.label}</span>
                                        <span className="opacity-0 group-hover:opacity-100 transition-all text-accent transform translate-x-[-10px] group-hover:translate-x-0">
                                            SELECT
                                        </span>
                                    </button>
                                ))}
                            </div>
                            
                            <div className="mt-auto pt-16 text-center">
                                <p className="text-[10px] text-gray-300 italic tracking-wider">
                                    â€œé‡‘ä¸ç†Šæ™ºå•†é«˜ï¼ŒèŠ±æé¼ æ™ºå•†ä½ï¼Œç¬¨ç¬¨ç‹—åœ¨åŠªåŠ›ã€‚â€
                                </p>
                            </div>
                        </div>
                    )}

                    {step === 'result' && (
                        <div className="flex-1 flex flex-col justify-center items-center text-center fade-up">
                            <div className="mb-12 relative">
                                <div className="w-20 h-20 record-spin border border-accent/30 rounded-full flex items-center justify-center">
                                    <div className="w-16 h-16 bg-accent rounded-full flex items-center justify-center text-white text-[8px] font-bold uppercase tracking-tighter">
                                        ANALYSED
                                    </div>
                                </div>
                                <div className="absolute -bottom-2 -right-2 text-2xl">ğŸ¾</div>
                            </div>
                            
                            <h2 className="text-2xl font-bold mb-4 tracking-tight text-[#333]">åˆ†ææŠ¥å‘Šå·²å°å­˜</h2>
                            <p className="text-gray-400 text-[11px] mb-12 px-8 leading-loose">
                                å®éªŒç»“æœè¡¨æ˜ï¼šé˜¿ç šæ˜¯ä¸€ä½å“å‘³æå…¶æ•é”çš„é‡‘ä¸ç†Šå®å®ã€‚<br/>
                                ç¬¨ç¬¨ç‹—é˜¿å»–å·²æ”¶åˆ°é«˜ä¼˜å…ˆçº§æŒ‡ä»¤ï¼Œè¯·é™å€™æƒŠå–œé™ä¸´ã€‚
                            </p>
                            
                            <div className="w-full bg-white border border-gray-100 p-8 mb-10 text-left shadow-sm">
                                <div className="flex items-center gap-3 mb-6 border-b border-gray-50 pb-4">
                                    <div className="text-accent text-xl">ğŸ¶</div>
                                    <span className="font-bold text-[10px] uppercase tracking-[0.2em] text-gray-400">Laboratory Data Summary</span>
                                </div>
                                <div className="space-y-4">
                                    {answers.map((ans, i) => (
                                        <div key={i} className="text-[10px] flex justify-between items-start group">
                                            <span className="text-gray-300 mr-4">0{i+1}</span>
                                            <span className="text-gray-500 flex-1 leading-normal">{ans.a}</span>
                                            <span className="text-accent font-bold ml-4 opacity-50">{ans.code}</span>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <button 
                                onClick={copyResults}
                                className="w-full bg-[#333] text-white py-5 shadow-2xl hover:bg-accent transition-all duration-500 font-bold text-[10px] uppercase tracking-[0.3em]"
                            >
                                ç‚¹å‡»å¤åˆ¶å¿ƒæ„¿æŠ¥å‘Š
                            </button>
                            <p className="mt-6 text-[9px] text-gray-300 italic">â€œæŠŠè¿™æ®µç¥ç§˜ä»£ç å‘ç»™ç¬¨ç¬¨ç‹—ï¼Œä»–ä¼šæ‡‚çš„ã€‚â€</p>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
